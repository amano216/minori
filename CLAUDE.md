# CLAUDE.md

このファイルはClaudeに関する情報を記載するためのものです。

- 作成日: 2025-11-23
- 作成者: amano216

## 概要
このプロジェクトの開発においてClaudeが従うべき設計方針と実装ルールを記載しています。

## プロジェクト概要
訪問看護スケジュール管理アプリ（ZEST参考）のMVP開発

### MVPスコープ
- スタッフ管理
- 患者/利用者管理
- 訪問予定管理
- スケジュール表示・作成
- 認証機能（ログイン/ログアウト）

### MVPに含めないもの
- ルート最適化（移動時間の自動計算）
- レセプト・請求機能
- 多職種連携機能

## 設計方針
MITの「Concepts & Synchronizations」パターンに従ってコードを設計してください。

### 概念(Concepts)の定義
以下の機能を独立した概念として実装してください:

- **Auth**: 認証機能（ログイン/ログアウト、セッション管理）
- **Staff**: 訪問スタッフ管理（名前、資格、勤務可能時間）
- **Patient**: 患者/利用者管理（名前、住所、必要なケア内容）
- **Visit**: 訪問予定管理（日時、担当者、患者、ステータス）
- **Schedule**: 日/週単位のスケジュール表示・作成

各概念は:
- 他の概念に直接依存しない自己完結型
- 独自の状態とアクションを持つ
- 単一責任の原則に従う

### 同期(Synchronizations)の定義
概念間の相互作用を以下のルールで記述してください:

```
WHEN User がログインしたとき
WHERE 認証情報が正しい
THEN Session を作成する

WHEN Visit が作成されたとき
WHERE Staff の該当時間が空いている
THEN Staff のスケジュールに Visit を追加する

WHEN Visit がキャンセルされたとき
THEN Staff のスケジュールから Visit を削除する

WHEN Staff が削除されたとき
THEN 該当 Staff の未完了 Visit を未割当状態にする

WHEN Patient が削除されたとき
THEN 該当 Patient の未完了 Visit をキャンセルする
```

## 技術スタック

### フロントエンド
- React
- Vite

### バックエンド
- Ruby on Rails

### インフラ
- Google Cloud Platform (GCP)

## 実装要件
- SOLID原則に従う
- マイクロサービスアーキテクチャの設計思想に従う
- RESTful API設計
- 認証にはJWT or セッションベース認証を使用
